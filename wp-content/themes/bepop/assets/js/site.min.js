!function(e){"use strict";var t=window.navigator.userAgent||window.navigator.vendor||window.opera;/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(t)&&e("body").addClass("is-touch");var o=new Pjax({cacheBust:!1,elements:"a:not(.no-ajax):not(.sub-ajax):not(.ajax_add_to_cart):not(.remove):not(.comment-reply-link):not(#cancel-comment-reply-link), #header form",selectors:["title","#header","#content","#footer"],switches:{"#content":function(t,o,a){var n=this;e("html").addClass("page-animating"),setTimeout((function(){t.outerHTML=o.outerHTML,n.onSwitch(),e("html").removeClass("page-animating")}),600)}}});o._handleResponse=o.handleResponse,o.handleResponse=function(t,a,n){if(a.responseText.match("<html")){if(!t||t&&t.match(/class="site-content no-ajax/))return void(window.location.href=n);o._handleResponse(t,a,n);var r=e("body").hasClass("layout-app"),s=t.match(/body([^>]*)class=['|"]([^'|"]*)['|"]/);s&&setTimeout((function(){e("body").attr("class",s[2]+(r?" layout-app":""))}),600)}else window.location.href=n};var a=new Pjax({cacheBust:!1,elements:"a.sub-ajax",selectors:[".sub-content",".page-header, .navigation"]});e(document).on("refresh",(function(){o.refresh(),a.refresh()})),e(document).on("reload",(function(e,t){o.loadUrl(e&&e.detail&&e.detail.url||t||window.location.href)})),e(document).on("pjax:send",(function(){e("html").addClass("page-loading")})),e(document).on("pjax:complete",(function(){e("#menu-state").prop("checked",!1),e("#search-state").prop("checked",!1),e(".modal-backdrop").remove(),e("html").removeClass("page-loading scrolled"),e(document).trigger("refresh")})),e(document).on("click",".no-ajax > a:not(.no-ajax)",(function(t){t.preventDefault(),t.stopPropagation();var o=e(this).attr("href")?e(this).attr("href"):e(this).find("a").attr("href");return window.location=o,!1}));var n,r,s,i,l;e(document).on("scroll",(n=function(){var t=e("html"),o=e(window).scrollTop();0==o?t.removeClass("scrolled"):t.addClass("scrolled");var a=50,n=e(".entry:not(.hide-title) .entry-header-container .post-thumbnail img");if(0!=n.length){var r=n.closest(".post-thumbnail").height();if(0!=r){var s=parseFloat(n.attr("data-pos-y"));isNaN(s)||(a=s),(a=Math.min(o/r*100+a,100))<100&&n.attr("style","object-position: 50% "+a+"%")}}},r=10,function(){var e,t,o=this,a=arguments;return e=function(){i=null,s||(l=n.apply(o,a))},t=s&&!i,clearTimeout(i),i=setTimeout(e,r),t&&(l=n.apply(o,a)),l}))}(jQuery);